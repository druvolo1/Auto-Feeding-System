<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug</title>
    <script>
        async function toggleDebug(component, checkbox) {
            const response = await fetch('/toggle', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ component, enabled: checkbox.checked })
            });
            const result = await response.json();
            if (result.status !== 'success') {
                alert('Failed to toggle debug: ' + (result.error || 'Unknown error'));
                checkbox.checked = !checkbox.checked; // Revert on failure
            }
        }
    </script>
</head>
<body>
    <nav>
        <a href="/">Home</a>
        <a href="/settings">Settings</a>
        <a href="/debug">Debug</a>
        <a href="/logs">Logs</a>
    </nav>

    <h1>Debug Controls</h1>
    <p>Toggle debug logs for different system components.</p>

    <div>
        <label>
            <input type="checkbox" data-component="fresh-flow" onchange="toggleDebug('fresh-flow', this)">
            Fresh Flow
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" data-component="feed-flow" onchange="toggleDebug('feed-flow', this)">
            Feed Flow
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" data-component="drain-flow" onchange="toggleDebug('drain-flow', this)">
            Drain Flow
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" data-component="socket-connections" onchange="toggleDebug('socket-connections', this)">
            Socket Connections
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" data-component="plants" onchange="toggleDebug('plants', this)">
            Plants
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" data-component="dns-resolution" onchange="toggleDebug('dns-resolution', this)">
            DNS Resolution
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" data-component="local-websocket" onchange="toggleDebug('local-websocket', this)">
            Local WebSocket
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" data-component="notifications" onchange="toggleDebug('notifications', this)">
            Notifications
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" data-component="feeding-extended-log" onchange="toggleDebug('feeding-extended-log', this)">
            Feeding - Extended Log
        </label>
    </div>
</body>
</html>